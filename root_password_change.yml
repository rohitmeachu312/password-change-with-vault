---
- name: change root account password
  hosts: all
  vars_files:
    - vault_file.yml
  ansible_vault_password_file: https://github.com/rohitmeachu312/password-change-with-vault.git
  tasks:
    - name: changing password
      user:
        name: root
        password: "{{accountpass|password_hash('sha512')}}"
      tags: [never, root]
      
    - name: changing password
      user:
        name: ibmsase
        password: "{{accountpass|password_hash('sha512')}}"
      tags: [never, ibmsase]
      
    - name: changing password
      user:
        name: ibmsasc
        password: "{{accountpass|password_hash('sha512')}}"
      tags: [never, ibmsasc]
  
